var S=Object.defineProperty;var I=(e,t,i)=>t in e?S(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var n=(e,t,i)=>(I(e,typeof t!="symbol"?t+"":t,i),i);import{P as m,C as v,G as y,T as O,S as C,a as D,g as W,A as M,b as x,c as f}from"./vendor.90acae7b.js";const k=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function i(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerpolicy&&(r.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?r.credentials="include":s.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(s){if(s.ep)return;s.ep=!0;const r=i(s);fetch(s.href,r)}};k();const a=class{constructor(){n(this,"buttonData",{width:200,height:100,firstColor:"#3d983d",secondColor:"#c83131"});n(this,"mousePos",new m(window.innerWidth,0));n(this,"elapsedTime",0);n(this,"sceneState",l.first);if(a.instance)return a.instance;a.instance=this}getInstance(){return a.instance}};let g=a;n(g,"instance");var l=(e=>(e.first="scene one",e.second="scene two",e))(l||{});class H{constructor(t,i,o,s,r){n(this,"root",new v);n(this,"graphics",new y);n(this,"text");n(this,"fill",65280);n(this,"hoverFill",255);n(this,"clickFill",16711680);n(this,"width",200);n(this,"height",100);n(this,"radius",15);n(this,"position");n(this,"isOver",!1);n(this,"isPressed",!1);this.position=new m(t,i),this.width=o,this.height=s,this.graphics.interactive=!0,this.graphics.buttonMode=!0,this.graphics.on("pointerover",()=>{this.isOver=!0}),this.graphics.on("pointerout",()=>{this.isOver=!1}),this.graphics.on("pointerdown",()=>{this.isPressed=!0}),this.graphics.on("pointerup",()=>{this.isPressed=!1}),this.text=new O(r||""),this.text.anchor.set(.5,.5),this.root.addChild(this.graphics),this.root.addChild(this.text)}update(){this.root.position.set(this.position.x,this.position.y),this.graphics.clear(),this.isOver?this.graphics.beginFill(this.hoverFill):this.isPressed?this.graphics.beginFill(this.clickFill):this.graphics.beginFill(this.fill),this.graphics.drawRoundedRect(0,0,this.width,this.height,this.radius),this.text.position.set(this.width/2,this.height/2)}on(t,i){this.graphics.on(t,i)}}class P{constructor(t){n(this,"model");n(this,"container");n(this,"button");this.model=t,this.container=new v,this.container.sortableChildren=!0,this.container.width=window.innerWidth,this.container.height=window.innerHeight,this.button=new H(0,0,200,100,"Button"),this.button.root.zIndex=100,this.button.on("pointerover",()=>{this.button.isOver=!0}),this.button.on("pointerout",()=>{this.button.isOver=!1}),this.button.on("pointerdown",()=>{this.button.isPressed=!0}),this.button.on("pointerup",()=>{this.button.isPressed=!1}),this.container.addChild(this.button.root)}update(){}}class A extends P{constructor(t){super(t);n(this,"sprite",new C);this.button.on("pointerdown",()=>{this.model.sceneState=l.second,this.button.isPressed=!1,console.log(this.model.sceneState)}),this.button.position.x=100,this.button.position.y=100}update(){super.update();let t=this.model.buttonData.firstColor.slice(1);t="0x"+t,this.button.fill=parseInt(t),this.button.width=this.model.buttonData.width,this.button.height=this.model.buttonData.height,this.button.update()}}class L extends P{constructor(t){super(t);this.button.on("pointerdown",()=>{this.model.sceneState=l.first,this.button.isPressed=!1,console.log(this.model.sceneState)}),this.button.position.x=100,this.button.position.y=200}update(){super.update();let t=this.model.buttonData.secondColor.slice(1);t="0x"+t,this.button.fill=parseInt(t),this.button.width=this.model.buttonData.width,this.button.height=this.model.buttonData.height,this.button.update()}}function T(e,t){const i=new D;let o=i.addFolder("button params");o.add(e.getInstance().buttonData,"width",0,200),o.add(e.getInstance().buttonData,"height",0,200),o.addColor(e.getInstance().buttonData,"firstColor"),o.addColor(e.getInstance().buttonData,"secondColor");let s=i.addFolder("timeline");s.open();let r={pause:()=>t.pause(),play:()=>t.play(),reverse:()=>t.reverse(),progress:0};s.add(r,"pause"),s.add(r,"play"),s.add(r,"reverse"),s.add(r,"progress",0,1,.01).onChange(c=>{t.play(),t.progress(c),t.pause()})}let h=new g,d=new A(h),p=new L(h),w=W.timeline(),F=[],b=[],u=[];const z=e=>new Promise(t=>{e.loader.add("world1","assets/hello-world.png").load(()=>{t()})}),E=async()=>{let e=new M({antialias:!0,backgroundColor:5574977});document.body.style.margin="0",e.renderer.view.style.position="absolute",e.renderer.view.style.display="block",e.renderer.resize(window.innerWidth,window.innerHeight),await z(e);let t=new C(e.loader.resources.world1.texture);t.scale.set(.5,.5),t.anchor.set(.5,.5),t.interactive=!0,t.x=window.innerWidth/2,t.y=0,d.sprite=t,d.container.addChild(t),e.stage.addChild(d.container),e.stage.addChild(p.container);for(let i=0;i<10;i++){const o=new y;o.x=window.innerWidth/2,o.y=window.innerHeight/2,o.x+=150*Math.cos(i/10*Math.PI*2),o.y+=150*Math.sin(i/10*Math.PI*2);let s=new x;o.filters=[s],F.push(o),e.stage.addChild(o),b[i]={value:10},u[i]={r:1,g:1,b:1}}e.stage.interactive=!0,e.stage.hitArea=new f([0,0,window.innerWidth,0,window.innerWidth,window.innerHeight,0,window.innerHeight]),e.stage.on("pointerdown",i=>{h.mousePos.set(i.data.global.x,i.data.global.y)}),window.addEventListener("resize",i=>{e.renderer.resize(window.innerWidth,window.innerHeight),e.stage.hitArea=new f([0,0,window.innerWidth,0,window.innerWidth,window.innerHeight,0,window.innerHeight])}),document.body.appendChild(e.view),T(h,w),b.forEach((i,o)=>{w.to(i,{value:100,duration:2},"-=3.80"),w.to(u[o],{r:Math.random(),g:Math.random(),b:Math.random(),duration:4},"<")}),e.ticker.add(G)};function G(e){switch(h.elapsedTime+=e,F.forEach((t,i)=>{t.clear(),t.filters!=null&&t.filters[0]instanceof x&&(t.filters[0].red=u[i].r,t.filters[0].green=u[i].g,t.filters[0].blue=u[i].b),t.beginFill(16777215),t.drawCircle(0,0,b[i].value)}),h.sceneState){case l.first:d.container.visible=!0,p.container.visible=!1,d.update();break;case l.second:d.container.visible=!1,p.container.visible=!0,p.update();break}}E();
